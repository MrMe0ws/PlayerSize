# PlayerSize Plugin

Плагин для Minecraft сервера на Spigot 1.21.10, который изменяет размер всех игроков, делая их гномами.

## Описание

Этот плагин автоматически устанавливает размер игроков, делая их гномами. По умолчанию игроки получают рост примерно ~1.5 блока (настраивается в конфиге). Размер назначается один раз при первом входе игрока и сохраняется навсегда. Для реализма каждый гном может иметь немного отличающийся рост.

## Возможности

- ✅ Автоматическое изменение размера игроков при входе
- ✅ Случайный размер в диапазоне от 0.75 до 0.9 (рост ~1.35-1.62 блока, средний ~1.5 блока)
- ✅ Сохранение размера каждого игрока
- ✅ Настройка через config.yml с подробными комментариями
- ✅ Применение размера после респавна
- ✅ Команды управления: `/playersize set`, `/playersize reset`, `/playersize check`, `/playersize list`
- ✅ Система прав доступа для разных команд
- ✅ Работа с оффлайн игроками
- ✅ Tab-автодополнение команд

## Установка

1. Соберите плагин с помощью Maven:

   ```bash
   mvn clean package
   ```

2. Скопируйте файл `target/PlayerSize-1.0.0.jar` в папку `plugins` вашего сервера

3. Перезапустите сервер

4. При первом запуске будет создан файл `config.yml` в папке плагина

## Конфигурация

Файл `config.yml` находится в папке `plugins/PlayerSize/`:

```yaml
sizes:
  # Минимальный размер игрока (scale)
  # 0.75 = ~1.35 блока высоты (низкий гном)
  min-size: 0.75

  # Максимальный размер игрока (scale)
  # 0.9 = ~1.62 блока высоты (высокий гном)
  max-size: 0.9

  # Фиксированный размер по умолчанию
  # 0.83 = ~1.5 блока высоты (средний рост гнома)
  default-size: 0.83

  # Использовать случайный размер для реализма
  # true = каждый игрок получит случайный размер (гномы будут отличаться по росту)
  # false = все игроки получат одинаковый размер (default-size)
  use-random-size: true
```

### Параметры:

- **min-size** - Минимальный размер игрока (scale)

  - По умолчанию: `0.75` (~1.35 блока высоты)
  - Используется как нижняя граница для случайного размера
  - `1.0` = нормальный размер игрока (~1.8 блока высоты)
  - `0.75` = низкий гном (~1.35 блока высоты)

- **max-size** - Максимальный размер игрока (scale)

  - По умолчанию: `0.9` (~1.62 блока высоты)
  - Используется как верхняя граница для случайного размера
  - `0.9` = высокий гном (~1.62 блока высоты)

- **default-size** - Фиксированный размер, если `use-random-size = false`

  - По умолчанию: `0.83` (~1.5 блока высоты - средний рост гнома)
  - Используется когда вы хотите, чтобы все игроки имели одинаковый размер
  - Рекомендуемое значение для гномов: `0.83` (рост ~1.5 блока)

- **use-random-size** - Использовать случайный размер для реализма
  - `true` (по умолчанию) - каждый игрок получит случайный размер от min-size до max-size
    - Это создаст разнообразие: гномы будут немного отличаться по росту
    - Средний рост будет примерно ~1.5 блока
  - `false` - все игроки получат одинаковый размер (default-size)

### Справка по размерам:

| Scale | Рост (блоки) | Описание                      |
| ----- | ------------ | ----------------------------- |
| 1.0   | ~1.8         | Нормальный игрок              |
| 0.9   | ~1.62        | Высокий гном                  |
| 0.83  | ~1.5         | Средний гном ⭐ РЕКОМЕНДУЕТСЯ |
| 0.75  | ~1.35        | Низкий гном                   |
| 0.5   | ~0.9         | Очень маленький               |

## Как это работает

1. При первом входе игрока на сервер плагин:

   - Генерирует случайный размер в диапазоне min-size..max-size (если use-random-size = true)
     - Это создаст разнообразие: гномы будут немного отличаться по росту
     - Средний рост будет примерно ~1.5 блока
   - Или устанавливает фиксированный размер default-size (если use-random-size = false)
     - Все гномы будут одного роста
   - Сохраняет размер в файл `player_sizes.json`

2. При каждом последующем входе:

   - Плагин загружает сохраненный размер игрока
   - Применяет его к игроку

3. Размер применяется также после респавна игрока

## Команды

Все команды можно использовать с алиасами: `/psize` или `/psz` вместо `/playersize`

### `/playersize reload`

Перезагружает конфигурацию плагина без перезапуска сервера.

**Права доступа:** `playersize.admin` (только админы/OP)

**Использование:**

```
/playersize reload
```

---

### `/playersize set <игрок> <размер>`

Устанавливает конкретный размер указанному игроку. Работает как с онлайн, так и с оффлайн игроками.

**Права доступа:** `playersize.admin` (только админы/OP)

**Параметры:**

- `<игрок>` - ник игрока или UUID
- `<размер>` - размер от 0.1 до 2.0 (1.0 = нормальный размер)

**Использование:**

```
/playersize set PlayerName 0.83
/playersize set PlayerName 1.0
```

**Примеры:**

- `/playersize set Notch 0.75` - установить размер 0.75 игроку Notch
- `/psize set PlayerName 1.0` - установить нормальный размер игроку

---

### `/playersize reset <игрок>`

Сбрасывает размер игрока и генерирует новый (или устанавливает дефолтный, если `use-random-size = false`). Работает как с онлайн, так и с оффлайн игроками.

**Права доступа:** `playersize.admin` (только админы/OP)

**Параметры:**

- `<игрок>` - ник игрока или UUID

**Использование:**

```
/playersize reset PlayerName
```

**Примеры:**

- `/playersize reset Notch` - сбросить размер игрока Notch
- `/psize reset PlayerName` - сбросить размер игроку

---

### `/playersize check <игрок>`

Показывает текущий размер указанного игрока, включая рост в блоках.

**Права доступа:** `playersize.check` (по умолчанию доступно всем игрокам)

**Параметры:**

- `<игрок>` - ник игрока или UUID

**Использование:**

```
/playersize check PlayerName
```

**Примеры:**

- `/playersize check Notch` - проверить размер игрока Notch
- `/psize check PlayerName` - проверить размер игроку

**Вывод команды:**

```
[PlayerSize] Игрок: PlayerName
[PlayerSize] Размер: 0.83
[PlayerSize] Рост: ~1.49 блока
```

---

### `/playersize list`

Показывает список всех игроков с их размерами. Показывает до 20 игроков за раз, отмечает онлайн/оффлайн статус.

**Права доступа:** `playersize.list` (по умолчанию доступно всем игрокам)

**Использование:**

```
/playersize list
```

**Примеры:**

- `/playersize list` - показать список всех игроков
- `/psize list` - короткая версия

**Вывод команды:**

```
========== [PlayerSize] Список игроков ==========
PlayerName - Размер: 0.83 [Онлайн]
AnotherPlayer - Размер: 0.75 [Оффлайн]
...
===============================================
Всего игроков: 15
```

---

## Права доступа (Permissions)

Плагин использует систему прав для контроля доступа к командам:

- **`playersize.admin`** - Полный доступ ко всем командам (по умолчанию: только OP)

  - `/playersize reload`
  - `/playersize set`
  - `/playersize reset`

- **`playersize.check`** - Право на просмотр размеров игроков (по умолчанию: все игроки)

  - `/playersize check`

- **`playersize.list`** - Право на просмотр списка всех игроков (по умолчанию: все игроки)
  - `/playersize list`

**Пример настройки в плагине управления правами (например, LuckPerms):**

```
/lp group default permission set playersize.check true
/lp group default permission set playersize.list true
/lp group admin permission set playersize.admin true
```

## Технические детали

- Использует атрибут `minecraft:scale` (доступен с версии 1.20.4+)
- Конфигурация в формате YAML с подробными комментариями
- Размеры игроков сохраняются в JSON формате
- Совместим с Spigot 1.21.10

## Требования

- Spigot 1.21.10 или выше
- Java 21

## Разработка

Для разработки используйте Maven:

```bash
mvn clean compile
mvn clean package
```

## Лицензия

Этот плагин создан для личного использования.


## Заметки

cd "C:\Users\Meows\Desktop\Projects\Minecraft Plugin\PlayerSize"; mvn clean compile
cd "C:\Users\Meows\Desktop\Projects\Minecraft Plugin\PlayerSize"; mvn package